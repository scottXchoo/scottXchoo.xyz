---
emoji: 🖥️
title: 🖥️ [운영체제] 가상 메모리 (Virtual Memory)
date: '2023-12-06 17:30:00'
author: 추교현
tags: 운영체제
categories: 🖥️CS
---

가상 메모리와 스와핑에 대해서 알아봅시다.@

---

## 가상 메모리란?

가상 메모리는 컴퓨터 시스템에서 물리적 메모리(주로 RAM)의 크기를 초과하는 메모리 요구를 처리하기 위해 사용되는 기술입니다. 이 개념은 물리적 메모리와 보조 저장 장치(Ex. SSD, 하드 드라이브 등)를 함께 사용하여 시스템이 더 많은 메모리를 가진 것처럼 작동하도록 해줍니다.

페이징(Paging)과 세그멘테이션(Segmentaion) 같은 기법을 사용하여 구현됩니다.

## 가상 주소와 물리 주소

가상 주소(Virtual Address)와 물리 주소(Physical Address)는 컴퓨터 시스템에서 메모리 주소를 참조하는 두 가지 방식입니다. 이 두 주소 체계는 가상 메모리 시스템에서 특히 중요한 역할을 합니다.

1. 가상 주소 (Virtual Address)

   - 가상 주소는 프로그램에 의해 사용되는 주소입니다.
   - 프로그램이 실행될 때, 운영체제는 각 프로세스에게 독립된 가상 주소 공간을 제공합니다.
   - 이 가상 주소 공간은 실제 물리적 메모리의 크기와는 독립적이며 프로세스가 메모리에 접근할 때 사용하는 주소입니다.
   - 가상 주소는 프로그램이 메모리에 접근하려고 할 때, 물리 주소로 변환되어야 합니다.

2. 물리 주소 (Physical Address)
   - 물리 주소는 실제 메모리 하드웨어(RAM)에 존재하는 주소를 나타냅니다.
   - 운영체제의 메모리 관리 단위는 가상 주소를 물리 주소로 변환하는 과정을 통해 실제 메모리에 접근합니다.

## 가상 주소가 물리 주소로 변환하는 과정

프로세스가 메모리에 접근할 때, 가상 주소를 물리 주소로 변환하는 과정은 가상 메모리 시스템의 핵심적인 부분입니다. 가장 일반적인 ‘페이징’ 방식으로 설명해 보겠습니다.

1. 페이지 테이블 (Page Table)

   - 프로세스의 가상 주소 공간은 ‘페이지’라고 불리는 고정 크기의 블록으로 나뉩니다.
   - 각 페이지는 페이지 테이블을 통해 특정 물리 메모리 주소(프레임)에 매핑됩니다.
   - 페이지 테이블은 가상 주소를 물리 주소로 변환하는 데 사용되는 정보를 담고 있습니다.

2. 주소 변환 과정

   - 프로세스가 메모리를 요청할 때, 운영체제는 가상 주소를 받습니다.
   - 이 가상 주소는 ‘페이지 번호’와 ‘페이지 내 오프셋’으로 나뉩니다.
   - 페이지 번호는 페이지 테이블에서 해당 페이지가 매핑된 물리적 프레임을 찾는 데 사용됩니다.
   - 페이지 내 오프셋은 접근하려는 주소가 프레임의 시작 주소로부터 얼마큼 떨어져 있는지 알 수 있는 정보입니다.

3. 물리 주소의 생성
   - 페이지 테이블에서 찾은 프레임 번호와 페이지 내 오프셋을 결합하여 최종 물리 주소를 생성합니다.
   - 이 물리 주소는 실제 메모리에 접근하는 데 사용됩니다.

### TLB (Translation Lookaside Buffer)

페이지 테이블이 메모리에 적재되어 있어서 CPU는 메모리에 두 번 접근하게 됩니다. 메모리에 있는 페이지 테이블을 보기 위해 한 번, 그렇게 알게 된 프레임에 접근하기 위해 한 번, 이렇게 총 두 번의 메모리 접근이 필요합니다.

이와 같은 문제를 해결하기 위해서 CPU 곁에 (일반적으로 MMU 내에) TLB라는 페이지 테이블의 캐시 메모리를 둡니다.

TLB는 페이지 테이블의 캐시이기 때문에 페이지 테이블의 일부 내용을 저장하며 참조 지역성에 근거해 주로 최근에 사용된 페이지 위주로 가져와 저장합니다.

만약 CPU가 발생한 가상 주소에 대한 페이지 번호가 TLB에 있다면, 이를 TLB hit라고 하며 없을 경우 TLB miss라고 합니다.

## 스와핑 (Swapping)

스와핑은 현재 활성화되지 않고 오랫동안 사용되지 않는 프로세스들을 임시로 보조 저장 장치(하드 드라이브, SSD 등)의 스왑 영역으로 쫓아내고, 그렇게 해서 생긴 메모리상의 빈 공간에 또 다른 프로세스를 적재하여 실행하는 방식입니다.

스와핑을 통해 프로세스들이 요구하는 메모리 주소 공간의 크기가 실제 메모리 크기보다 큰 경우에도 프로세스들을 동시 실행할 수 있게 됩니다.

### 과정

1. 메모리 부족 상황 발생 ⇒ 2) 스왑 영역 선택 ⇒ 3) 프로세스 이동 ⇒ 4) 메모리 확보 ⇒ 5) 프로세스 재활성화

### 장/단점

장점으로는 더 많은 프로세스를 동시에 실행할 수 있기에 메모리 효율성이 증가합니다.

단점으로는 보조 저장 장치에 접근하는 과정이 있기에 물리적 메모리에 직접 접근하는 것보다 훨씬 느립니다.

---

"50대의 추교현이 20대의 추교현에게 감사할 수 있게끔 하루하루 최선을 다해 살고자 합니다."

**_The End._**
